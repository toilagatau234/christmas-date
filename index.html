<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªùi m·ªùi h·∫πn h√≤</title>
    <style>
        /* CSS: Giao di·ªán */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fce4ec;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 90%;
            position: relative;
            overflow: hidden;
            /* ƒê·ªÉ gi·ªØ n√∫t ch·∫°y tr·ªën trong khung n·∫øu mu·ªën */
        }

        h1 {
            color: #d81b60;
            font-size: 24px;
            margin-bottom: 20px;
        }

        p {
            color: #555;
            font-size: 16px;
        }

        button {
            background-color: #ff4081;
            color: white;
            border: none;
            padding: 12px 25px;
            margin-top: 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: 0.3s;
            box-shadow: 0 3px 10px rgba(255, 64, 129, 0.3);
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        button:hover:not(:disabled) {
            background-color: #c2185b;
            transform: translateY(-2px);
        }

        input,
        select,
        textarea {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            width: 80%;
            margin-bottom: 10px;
            font-family: inherit;
        }

        /* ·∫®n hi·ªán c√°c scene */
        .scene {
            display: none;
        }

        .active {
            display: block;
            animation: fadeIn 0.5s;
        }

        /* Icon th√†nh c√¥ng */
        .success-icon {
            font-size: 50px;
            display: block;
            margin-bottom: 20px;
            animation: popIn 0.5s;
        }

        /* --- CSS M·ªöI: GRID V√Ä CARD H√åNH ·∫¢NH --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            /* Chia l√†m 2 c·ªôt */
            gap: 15px;
            margin-bottom: 10px;
        }

        .card {
            border: 2px solid #eee;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: 0.2s;
            background: #fff;
        }

        .card:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Khi ƒë∆∞·ª£c ch·ªçn */
        .card.selected {
            border-color: #ff4081;
            background-color: #fff0f5;
            /* H·ªìng nh·∫°t */
            box-shadow: 0 0 10px rgba(255, 64, 129, 0.4);
        }

        .card img {
            width: 100%;
            height: 110px;
            object-fit: cover;
            /* Gi·ªØ ·∫£nh kh√¥ng b·ªã m√©o */
        }

        .card-title {
            padding: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #444;
        }

        .success-icon {
            font-size: 50px;
            display: block;
            margin-bottom: 20px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes popIn {
            0% {
                transform: scale(0);
            }

            80% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1);
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <div id="scene-1" class="scene active">
            <h1>Em c√≥ mu·ªën ƒëi h·∫πn h√≤ v·ªõi anh h√¥nggggg? üíñ</h1>
            <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3R4YnhzM3J4YnhzM3R4YnhzM3R4YnhzM3R4YnhzM3R4YnhzJmZXcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/26BRv0ThflsHCqDrG/giphy.gif"
                style="width: 100%; border-radius: 10px; margin-bottom: 20px;">
            <br>
            <button class="btn" onclick="nextScene(2)">C√≥ ch·ª©!</button>
            <button class="btn" style="background-color: #888;" onmouseover="dodge(this)"
                onclick="alert('Kh√¥ng ƒë∆∞·ª£c ch·ªçn n√∫t n√†y!')">Kh√¥ng :(</button>
        </div>

        <div id="scene-2" class="scene">
            <h1>M√¨nh ƒëi v√†o l√∫c n√†o nh·ªâ? ‚è∞</h1>
            <p>Ch·ªçn gi·ªù ho√†ng ƒë·∫°o nh√© :333</p>
            <input type="datetime-local" id="date-time" style="width: 90%; padding: 15px;">
            <br>
            <button class="btn" onclick="saveTimeAndNext()">Ti·∫øp theo</button>
        </div>

        <div id="scene-3" class="scene">
            <h1>Em mu·ªën ch·ªçn g√¨ cho m√≥n ch√≠nh c·ªßa t·ª•i m√¨nh? üçï</h1>
            <div class="options-grid">
                <div class="card" onclick="selectCard(this, 'food', 'L·∫©u')">
                    <img src="https://images.unsplash.com/photo-1596797038530-2c107229654b?w=400&q=80" alt="L·∫©u">
                    <div class="card-title">L·∫©u n√≥ng h·ªïi</div>
                </div>
                <div class="card" onclick="selectCard(this, 'food', 'ƒê·ªì n∆∞·ªõng BBQ')">
                    <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&q=80" alt="BBQ">
                    <div class="card-title">ƒê·ªì n∆∞·ªõng BBQ</div>
                </div>
                <div class="card" onclick="selectCard(this, 'food', 'M√≥n √Çu (Steak/M·ª≥)')">
                    <img src="https://images.unsplash.com/photo-1485962398705-ef6a13c41e8f?w=400&q=80" alt="Steak">
                    <div class="card-title">B√≠t t·∫øt / M·ª≥ √ù</div>
                </div>
                <div class="card" onclick="selectCard(this, 'food', 'Sushi Nh·∫≠t')">
                    <img src="https://images.unsplash.com/photo-1579871494447-9811cf80d66c?w=400&q=80" alt="Sushi">
                    <div class="card-title">Sushi Nh·∫≠t B·∫£n</div>
                </div>
            </div>
            <button class="btn" onclick="checkSelectionAndNext('food', 4)">Ti·∫øp theo</button>
        </div>

        <div id="scene-4" class="scene">
            <h1>Tr√°ng mi·ªáng nh√© hay n∆∞·ªõc u·ªëng nh√© b·∫•y b√¨? üßã</h1>
            <div class="options-grid">
                <div class="card" onclick="selectCard(this, 'dessert', 'Tr√† s·ªØa')">
                    <img src="https://images.unsplash.com/photo-1558855410-3111564d2553?w=400&q=80" alt="Tr√† s·ªØa">
                    <div class="card-title">Tr√† s·ªØa</div>
                </div>
                <div class="card" onclick="selectCard(this, 'dessert', 'Kem')">
                    <img src="https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=400&q=80" alt="Kem">
                    <div class="card-title">Kem m√°t l·∫°nh</div>
                </div>
                <div class="card" onclick="selectCard(this, 'dessert', 'Cafe')">
                    <img src="https://images.unsplash.com/photo-1497935586351-b67a49e012bf?w=400&q=80" alt="Cafe">
                    <div class="card-title">Cafe Chill</div>
                </div>
                <div class="card" onclick="selectCard(this, 'dessert', 'B·∫Øp rang b∆°')">
                    <img src="https://images.unsplash.com/photo-1578849278619-e73505e9610f?w=400&q=80" alt="Popcorn">
                    <div class="card-title">B·∫Øp rang b∆°</div>
                </div>
            </div>
            <button class="btn" onclick="checkSelectionAndNext('dessert', 5)">Ti·∫øp theo</button>
        </div>

        <div id="scene-5" class="scene">
            <h1>Ti·∫øt m·ª•c ti·∫øp theo em y√™u mu·ªën g√¨ n√®? üé°</h1>
            <div class="options-grid">
                <div class="card" onclick="selectCard(this, 'activity', 'D·∫°o ph·ªë')">
                    <img src="https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?w=400&q=80" alt="D·∫°o ph·ªë">
                    <div class="card-title">D·∫°o ph·ªë / C√¥ng vi√™n</div>
                </div>
                <div class="card" onclick="selectCard(this, 'activity', 'Xem phim')">
                    <img src="https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&q=80" alt="Xem phim">
                    <div class="card-title">Xem phim r·∫°p</div>
                </div>
                <div class="card" onclick="selectCard(this, 'activity', 'Bowling/Game')">
                    <img src="https://images.unsplash.com/photo-1533554483738-f933227976cc?w=400&q=80" alt="Bowling">
                    <div class="card-title">Bowling / Games</div>
                </div>
                <div class="card" onclick="selectCard(this, 'activity', 'Netflix & Chill')">
                    <img src="https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=400&q=80" alt="Netflix">
                    <div class="card-title">ƒê·∫•m boxing nh√©!</div>
                </div>
            </div>
            <button class="btn" onclick="checkSelectionAndNext('activity', 6)">Ch·ªët ƒë∆°n</button>
        </div>

        <div id="scene-6" class="scene">
            <h1>Ch·ªët ƒë∆°n nh√© üíò</h1>
            <p>Ki·ªÉm tra l·∫°i v√† b·∫•mr·ªìi g·ª≠i cho anh nha:</p>
            <textarea id="result-text" rows="6" style="width:90%"></textarea>
            <br>
            <p>b·∫•y b√¨ c√≥ mu·ªën g·ª≠i l·ªùi nh·∫Øn g√¨ cho anh h√¥nggggg?</p>
            <textarea id="message-text" rows="6" style="width:90%"></textarea>
            <br>
            <button class="btn" id="btn-send" onclick="sendDataToFormspree()">G·ª≠i ngay cho anh</button>
            <p id="error-message" style="color: red; font-size: 14px; margin-top:10px;"></p>
        </div>

        <div id="scene-7" class="scene">
            <div class="success-icon">‚úÖ</div>
            <h1>ƒê√£ g·ª≠i th√†nh c√¥ng!</h1>
            <p>Anh ƒë√£ nh·∫≠n ƒë∆∞·ª£c t√≠n hi·ªáu v≈© tr·ª•. H·∫πn g·∫∑p em nh√©! ‚ù§Ô∏è</p>
        </div>
    </div>

    <script>
        // --- C·∫§U H√åNH ---
        // üëáüëáüëá D√ÅN LINK FORMSPREE C·ª¶A B·∫†N V√ÄO ƒê√ÇY üëáüëáüëá
        const FORMSPREE_ENDPOINT = "https://formspree.io/f/mrbnrbev";


        // --- LOGIC ---
        let dateData = {
            time: "",
            food: "",
            dessert: "",
            activity: ""
        };

        function showScene(sceneNumber) {
            document.querySelectorAll('.scene').forEach(scene => {
                scene.classList.remove('active');
            });
            document.getElementById('scene-' + sceneNumber).classList.add('active');
        }

        function nextScene(number) {
            showScene(number);
        }

        function saveTimeAndNext() {
            const timeInput = document.getElementById('date-time').value;
            if (!timeInput) { alert("H√£y ch·ªçn th·ªùi gian nh√©!"); return; }
            dateData.time = timeInput;
            nextScene(3);
        }

        // --- H√ÄM X·ª¨ L√ù CH·ªåN CARD (M·ªöI) ---
        // H√†m n√†y ƒë∆∞·ª£c g·ªçi khi b·∫•m v√†o 1 th·∫ª b√†i (card)
        function selectCard(cardElement, category, value) {
            // 1. T√¨m th·∫ª cha ch·ª©a c√°c card (options-grid)
            const parent = cardElement.parentElement;

            // 2. X√≥a class 'selected' c·ªßa t·∫•t c·∫£ c√°c card kh√°c trong c√πng nh√≥m
            const siblings = parent.querySelectorAll('.card');
            siblings.forEach(el => el.classList.remove('selected'));

            // 3. Th√™m class 'selected' cho card v·ª´a b·∫•m
            cardElement.classList.add('selected');

            // 4. L∆∞u d·ªØ li·ªáu v√†o bi·∫øn
            dateData[category] = value;
        }

        // H√†m ki·ªÉm tra xem ƒë√£ ch·ªçn ch∆∞a tr∆∞·ªõc khi qua m√†n ti·∫øp theo
        function checkSelectionAndNext(category, nextSceneNum) {
            if (!dateData[category]) {
                alert("Em ch∆∞a ch·ªçn m√≥n n√†o k√¨a! ü•∫");
                return;
            }

            // N·∫øu l√† b∆∞·ªõc cu·ªëi tr∆∞·ªõc khi hi·ªán k·∫øt qu·∫£, c·∫≠p nh·∫≠t text
            if (nextSceneNum === 6) {
                displayResult();
            }

            nextScene(nextSceneNum);
        }

        function displayResult() {
            const resultString = `Th·ªùi gian: ${dateData.time}\n` +
                `M√≥n ch√≠nh: ${dateData.food}\n` +
                `Tr√°ng mi·ªáng: ${dateData.dessert}\n` +
                `Ho·∫°t ƒë·ªông sau ƒÉn: ${dateData.activity}`;
            document.getElementById('result-text').value = resultString;
        }

        function dodge(btn) {
            // L√†m n√∫t ch·∫°y lung tung tr√™n m√†n h√¨nh
            btn.style.position = 'fixed';
            btn.style.top = Math.random() * (window.innerHeight - 50) + 'px';
            btn.style.left = Math.random() * (window.innerWidth - 100) + 'px';
        }

        // --- H√ÄM G·ª¨I D·ªÆ LI·ªÜU ---
        function sendDataToFormspree() {
            const btn = document.getElementById('btn-send');
            const errorMsg = document.getElementById('error-message');
            const content = document.getElementById('result-text').value +
                "\n\nL·ªùi nh·∫Øn t·ª´ em:\n" +
                document.getElementById('message-text').value;

            // Check link
            if (FORMSPREE_ENDPOINT.includes("D√ÅN_M√É")) {
                alert("B·∫°n ch∆∞a d√°n link Formspree v√†o code k√¨a!");
                return;
            }

            btn.innerHTML = "ƒêang g·ª≠i...";
            btn.disabled = true;
            errorMsg.innerHTML = "";

            fetch(FORMSPREE_ENDPOINT, {
                method: "POST",
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: content,
                    _subject: "K√®o h·∫πn h√≤ ch·ªët ƒë∆°n! (C√≥ H√¨nh ·∫¢nh)"
                })
            })
                .then(response => {
                    if (response.ok) {
                        nextScene(7);
                    } else {
                        errorMsg.innerHTML = "L·ªói server, vui l√≤ng th·ª≠ l·∫°i.";
                        btn.innerHTML = "Th·ª≠ l·∫°i";
                        btn.disabled = false;
                    }
                })
                .catch(error => {
                    errorMsg.innerHTML = "L·ªói m·∫°ng r·ªìi :(";
                    btn.innerHTML = "Th·ª≠ l·∫°i";
                    btn.disabled = false;
                });
        }
    </script>

</body>

</html>